syntax = "proto3";

message EntityAction {
    string type = 1;
    optional string tag = 2;
    string payload = 3;
}

message ManyEntityAction {
    repeated EntityAction actions = 1;
}

message StartSignalRequest {}
message StartSignalResponse {}

message SendBatchResponse {}

message UnsubscribeRequest {
    string event_id = 1;
}
message SubscribeRequest {
    string event_id = 1;
}
message SubscribeResponse {}
message UnsubscribeResponse {}

message StreamEventsRequest {}
message StreamEventsResponse {
    string event_id = 1;
    string event_data = 2;
}

service EngineAPIService {
  rpc sendBatch(ManyEntityAction) returns (SendBatchResponse) {}
  rpc startSignal(StartSignalRequest) returns (StartSignalResponse) {}

  rpc subscribe(SubscribeRequest) returns (SubscribeResponse) {}
  rpc unsubscribe(UnsubscribeRequest) returns (UnsubscribeResponse) {}

  rpc streamEvents(StreamEventsRequest) returns (stream StreamEventsResponse) {}
}